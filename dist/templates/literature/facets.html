<div ng-controller="claimCtrl">
  <div  ng-if="user_is_logged">
    <h4>Claim Mode</h4>
    <div class="facet-container">
          <div class="onoffswitch col-centered">
            <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch"
                  ng-model="vm.SwitchColor"
                  ng-change="toggleClaim()"
                  >
            <label class="onoffswitch-label" for="myonoffswitch{{$index}}">
              <span class="onoffswitch-inner"></span>
              <span class="onoffswitch-switch"></span>
            </label>
          </div>
    </div>
    <hr>
  </div>
</div>
<div ng-init="order={'doc_type': 'Document type', 'subject': 'Subject', 'author': 'Author', 'experiment': 'Experiment', 'earliest_date': 'Year'}">
  <div ng-if="vm.invenioSearchResults.aggregations[key].buckets.length" ng-repeat="(key, title) in order">
    <h4>Filter by {{ title }}</h4>
    <div class="facet-container">
      <ul class="list-unstyled" ng-controller="FacetsShowMoreController">
        <li class="checkbox checkbox-facets" ng-repeat="item in vm.invenioSearchResults.aggregations[key].buckets | limitTo: facetResults">
          <label>
            <input class="include-facet" type="checkbox" ng-checked="handler[key].indexOf(item.key) > -1" ng-click="handleClick(key, item.key)" />
            <span ng-if="key != 'earliest_date'" class="facet-title-truncate">{{ item.key | capitalize }}</span>
            <span ng-if="key == 'earliest_date'" class="facet-title-truncate">{{ item.key_as_string }}</span>
            <span class="facet-label label"><span class="facet-count pull-right">{{ item.doc_count }}</span></span>
          </label>
        </li>
        <div ng-show="vm.invenioSearchResults.aggregations[key].buckets.length > facetResults">
          <a ng-click="moreFacetResults()">Show {{calculateStep(key)}} more</a>
        </div>
      </ul>
    </div>
    <hr ng-if="!$last">
  </div>
</div>
